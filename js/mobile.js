define([],function(){var e,t,n,i,o,d=!1,s=function(){document.getElementById("viewer-box").addEventListener("webkitTransitionEnd",function(){0==d&&(document.getElementById("viewer").className="hide",d=!0)},!1),i.addEventListener("touchend",function(){document.getElementById("viewer").className="",setTimeout(function(){o.className="anm-swipe"},0),d=!0,document.ontouchstart=function(e){if("A"!=e.target.tagName)return!1}},!1);var e,t=document.getElementsByClassName("viewer-box-r")[0];t.addEventListener("touchstart",function(){e=+new Date},!1),t.addEventListener("touchend",function(){+new Date-e<300&&(document.getElementById("viewer-box").className="",d=!1,document.ontouchstart=function(){return!0}),e=0,0},!1);var n=$("#mobile-nav .overlay"),s=$(".js-mobile-header");window.onscroll=function(){var e=document.documentElement.scrollTop+document.body.scrollTop;e>=69?n.addClass("fixed"):n.removeClass("fixed"),e>=160?s.removeClass("hide").addClass("fixed"):s.addClass("hide").removeClass("fixed")},s[0].addEventListener("touchstart",function(){$("html, body").animate({scrollTop:0},"slow")},!1)};return{init:function(){i=document.getElementsByClassName("slider-trigger")[0],document.body.scrollHeight/document.body.scrollWidth,document.body.scrollWidth,0,function(){var i=document.createElement("div");i.id="viewer",i.className="hide",e=document.getElementById("js-tagcloud"),t=document.getElementById("js-aboutme"),n=document.getElementById("js-aboutsite");var d=e?'<span class="viewer-title">标签</span><div class="viewer-div tagcloud" id="js-mobile-tagcloud"></div>':"",s=t?'<span class="viewer-title">关于我</span><div class="viewer-div aboutme" id="js-mobile-aboutme"></div>':"",a=n?'<span class="viewer-title">关于本站</span><div class="viewer-div aboutsite" id="js-mobile-aboutsite"></div>':"";i.innerHTML='<div id="viewer-box">\t\t<div class="viewer-box-l">\t\t\t<div class="viewer-box-wrap">'+s+a+d+'</div>\t\t</div>\t\t<div class="viewer-box-r"></div>\t\t</div>',document.getElementsByTagName("body")[0].insertBefore(i,document.getElementById("container"));var l=document.getElementById("viewer-box");o=l,l.style.height=document.body.scrollHeight+"px"}(),e&&(document.getElementById("js-mobile-tagcloud").innerHTML=e.innerHTML),t&&(document.getElementById("js-mobile-aboutme").innerHTML=t.innerHTML),n&&(document.getElementById("js-mobile-aboutsite").innerHTML=n.innerHTML),s(),function(){var e=$(".tagcloud a");e.css({"font-size":"12px"});for(var t=0,n=e.length;t<n;t++){var i=e.eq(t).html().length%5+1;e[t].className="",e.eq(t).addClass("color"+i)}}()}}});